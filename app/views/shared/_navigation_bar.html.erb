<% if current_user %>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a href="#" class="topnav-logo">
      <span class="topnav-logo-lg">
          <%= image_tag 'logo.png', width: 120, height: 50 %>
      </span>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item  dropdown">
          <a class="nav-link text-white-50 dropdown-toggle" data-toggle="dropdown" id="topbar-languagedrop" href="#" role="button" aria-haspopup="true" aria-expanded="false">
            <span class="align-middle">Catálagos</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated topbar-dropdown-menu" aria-labelledby="topbar-languagedrop">
            <% if current_user.role_can_view_contact_types %>  
              <%= link_to 'Tipos de contactos', contact_types_path, class: 'dropdown-item notify-item' %>
            <% end %>
            <% if current_user.role_can_view_document_types %>  
              <%= link_to 'Tipos de documentos', document_types_path, class: 'dropdown-item notify-item' %>
            <% end %>
            <% if current_user.role_can_view_movement_types %>  
              <%= link_to 'Tipos de movimientos', movement_types_path, class: 'dropdown-item notify-item' %>
            <% end %>
            <% if current_user.role_can_view_clients %>  
              <%= link_to 'Clientes', clients_path, class: 'dropdown-item notify-item' %>
            <% end %>
          </div>
        </li>
        <li class="nav-item  dropdown">
          <a class="nav-link text-white-50 dropdown-toggle" data-toggle="dropdown" id="topbar-languagedrop" href="#" role="button" aria-haspopup="true" aria-expanded="false">
            <span class="align-middle">Configuración</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated topbar-dropdown-menu" aria-labelledby="topbar-languagedrop">
            <% if current_user.role_can_view_users %>  
              <%= link_to 'Usuarios', users_path, class: 'dropdown-item notify-item' %>
            <% end %>
            <% if current_user.role_can_view_roles %>  
              <%= link_to 'Roles', roles_path, class: 'dropdown-item notify-item' %>
            <% end %>
            <% if current_user.role_can_view_contracts %>  
              <%= link_to 'Contratos', contracts_path, class: 'dropdown-item notify-item' %>
            <% end %>
          </div>
        </li>
        <li class="nav-item  dropdown">
          <a class="nav-link text-white-50 dropdown-toggle" data-toggle="dropdown" id="topbar-languagedrop" href="#" role="button" aria-haspopup="true" aria-expanded="false">
            <span class="align-middle">Préstamos</span>
          </a>
          <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated topbar-dropdown-menu" aria-labelledby="topbar-languagedrop">
            <% if current_user.role_can_view_loans %>  
              <%= link_to 'Prestamos activos', loans_path(filter: 'active'), class: 'dropdown-item notify-item' %>
              <%= link_to 'Préstamos finalizados', loans_path(filter: 'finished'), class: 'dropdown-item notify-item' %>
            <% end %>
          </div>
        </li>
        <% if current_user.role_name == 'gerencia' %>
          <li class="nav-item">
            <%= link_to 'Logs', logs_path, class: 'nav-link' %>
          </li>
        <% end %>
        <li class="nav-item  dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span>
              <span class="account-user-name"><%= current_user.username.capitalize %></span>
              <span class="account-position"><%= "#{current_user.name.capitalize} #{current_user.last_name.capitalize}" %></span>
            </span>
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <%= link_to 'Salir', destroy_user_session_path, method: :delete, class: 'dropdown-item' %>
          </div>
        </li>
      </ul>
    </div>
  </nav>

 <% end %>

 <style>
  .navbar-custom, .nav-user{
    height: 87px
  }
  
  .dropdown:hover>.dropdown-menu {
    display: block;
  }

  .dropdown>.dropdown-toggle:active {
    /*Without this, clicking will make it sticky*/
      pointer-events: none;
  }
 </style>



